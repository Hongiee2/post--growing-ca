<!doctype html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://distill.pub/template.v2.js"></script>
  <style>
  </style>
  <script src="twgl.min.js"></script>
  <script type="module" src="./ca.js"></script>
  <script type="module" src="./demo.js"></script>
</head>

<body>

  <d-front-matter>
    <script type="text/json">{
      "title": "Growing Cellular Automata",
      "description": "Differentiable Self-Organisation: Cellular Automata model of Morphogenesis.",
      "password": "selforg",
      "authors": [
        {
          "author": "Alexnader Mordvintsev",
          "authorURL": "https://znah.net/",
          "affiliation": "Google",
          "affiliationURL": "https://ai.google/"
        },
        {
          "author": "Ettore Randazzo",
          "authorURL": "",
          "affiliation": "Google",
          "affiliationURL": "https://ai.google/"
        },
        {
            "author": "Eyvind Niklasson",
            "authorURL": "",
            "affiliation": "Google",
            "affiliationURL": "https://ai.google/"
        }
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script>
  </d-front-matter>

  <style>

    figure {
      text-align: center
    }
    figure img {
      max-width: 100%;
    }

    video {
      max-width: 100%;
    }
    .demoCanvas {
      border: 1px solid lightgrey;
      image-rendering: pixelated;
      touch-action: none;
      width: 100%;
      max-width: 500px;
    }

    #demoControls {
    }
   
    @media (min-width: 768px) {
      #demoControls {
      }
    }

    #status {
      color: rgba(0, 0, 0, 0.6);
      font-size: 12px;
      margin: 2px;
      position: absolute;
    }
    #playback {
      display: flex;
    }

    #experimentSelector * {
      cursor: pointer;
      border: 1px solid lightgrey;
      white-space: nowrap;
    }
    #experimentSelector *:hover {
      background-color: lightyellow;
    }
    .icon {
      width: 40px; height: 40px;
      touch-action: none;
      user-select: none;
    }
    .icon:hover {
      background:blanchedalmond;
    }

    .colab-root {
      display: inline-block;
      background: rgba(255, 255, 255, 0.75);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px!important;
      text-decoration: none;
      color: #aaa;
      border: none;
      font-weight: 300;
      border: solid 1px rgba(0, 0, 0, 0.08);
      border-bottom-color: rgba(0, 0, 0, 0.15);
      text-transform: uppercase;
      line-height: 16px;
    }
    
   span.colab-span {
      background-image: url(images/colab.svg);
      background-repeat: no-repeat;
      background-size: 20px;
      background-position-y: 2px;
      display: inline-block;
      padding-left: 24px;
      border-radius: 4px;
      text-decoration: none;
    }

    a.colab-root:hover{
      color: #666;
      background: white;
      border-color: rgba(0, 0, 0, 0.2);
    }
  </style>
  <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
    <symbol id="playIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></symbol>
    <symbol id="pauseIcon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></symbol>
    <symbol id="resetIcon"  viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/></symbol>
  </svg>

  <d-title>
    <h1>Growing Neural Cellular Automata</h1>
    <p>Differentiable Model of Morphogenesis</p>

    <p>
      <b>Please propose edits in the Google Docs
        <a href="https://docs.google.com/document/d/11UnoVOWPncooSMQFqBigcLzP-dVyalmgrLa2pWFxhuM">
          version of this document</a>.</b>
    </p>
    <div class="l-body" id="demo" style='max-width: 500px;'>
      <div>
        <span id='status'></span>
        <canvas id="c" class="demoCanvas">
        </canvas><br>
      </div>
      <div id="demoControls">
        <div id='playback'>
          <span id="playPause">
            <svg class="icon" id="play"><use xlink:href="#playIcon"/></svg>
            <svg class="icon" id="pause" style="display:none"><use xlink:href="#pauseIcon"/></svg>
          </span>

          <div style="flex-grow: 2; text-align: center; line-height: 0.8em;">
            <input style="width: 90%" id="speed" type="range" min="-3" max="3" step="1" value="0"><br>
            <span id='speedLabel'>speed</span>
          </div>
          <svg class="icon" id="resetButton"><use xlink:href="#resetIcon"/></svg>
        </div>
        <b>Model type:</b> <span id='experimentSelector'>
            <span id="ex1">growing</span>
            <span id="ex2">+ persistent</span>
            <span id="ex3">+ regenerating</span>
        </span> <br>
        <b>Pattern</b>: <span id="emojiSelector"></span> <br>
        <label for="angle">Rotation</label>
        <input type="range" id="angle" min="0" max="360" step="10" value="0"> <br>
        
        
      </div>
      <figcaption>
        This demo invites the reader to interact with pattern-generating
        Neural Cellular Automata models described in this article.
        Click or tap the image to erase the part of the pattern and see it regenerate.
        Double clicking places a new seed cell on the grid.
      </figcaption>
    </div>
  </d-title>

  <script type="module">
    import { createDemo } from './demo.js'
    createDemo('demo');
  </script>
